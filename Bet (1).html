git add .
git commit -m "Initial commit"
git push origin main

<!DOCTYPE html>
<html>
<head>
<title>Department Fund Manager (Online)</title>

<!-- FIREBASE CDN -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body{
  margin:0; min-height:100vh; font-family:Arial;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
}
.card{
  background:#fff; border-radius:16px;
  box-shadow:0 20px 40px rgba(0,0,0,.35);
}
#loginPage{width:360px;margin:120px auto;padding:25px;text-align:center}
#dashboard{display:none;padding:40px;display:flex;flex-direction:column;align-items:center}
input{width:100%;padding:12px;margin:8px 0;border-radius:8px;border:1px solid #aaa}
button{padding:10px;border:none;border-radius:8px;font-weight:bold;color:white;cursor:pointer}
.btn-blue{background:#007bff}
.btn-green{background:#28a745}
.btn-red{background:#dc3545}
.box{width:520px;padding:22px;margin-bottom:25px}
table{width:100%;border-collapse:collapse}
th,td{border:1px solid #bbb;padding:8px;text-align:center}
.pending{color:orange;font-weight:bold}
.approved{color:green;font-weight:bold}
.cancelled{color:red;font-weight:bold}
h2,h3{text-align:center}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginPage" class="card">
<h2>Login</h2>
<input id="username" placeholder="Username">
<input id="password" type="password" placeholder="Password">
<button class="btn-blue" onclick="login()">Login</button>
<p id="msg" style="color:red;font-weight:bold"></p>
</div>

<!-- DASHBOARD -->
<div id="dashboard">
<h2 style="color:white">Department Fund Dashboard</h2>
<p style="color:white">
User: <b><span id="uName"></span></b> |
Dept: <b><span id="uDept"></span></b> |
Role: <b><span id="uRole"></span></b>
</p>
<button class="btn-red" onclick="logout()">Logout</button>

<!-- REQUEST -->
<div class="card box">
<h3>Usage Request</h3>
<input id="balance" readonly>
<input id="item" placeholder="Item">
<input id="amount" type="number" placeholder="Amount">
<button class="btn-blue" onclick="sendRequest()">Send Request</button>
<p id="info"></p>
</div>

<!-- APPROVAL -->
<div id="approvalBox" class="card box">
<h3>Pending Requests (Admin Only)</h3>
<table id="approvalTable"></table>
</div>

<!-- HISTORY -->
<div class="card box">
<h3>History</h3>
<table id="historyTable"></table>
</div>
</div>

<head>
<title>Department Fund Manager (Online)</title>

<!-- SUPABASE CDN -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js"></script>
<script>
  const supabaseUrl = 'https://YOUR_PROJECT_REF.supabase.co'
  const supabaseKey = 'YOUR_PUBLIC_ANON_KEY'
  const supabase = supabase.createClient(supabaseUrl, supabaseKey)
</script>

<style>
...
</style>
</head>

<head>
  <title>Department Fund Manager (Online)</title>

  <!-- SUPABASE CDN -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js"></script>
  <script>
    const supabaseUrl = 'https://YOUR_PROJECT_REF.supabase.co'
    const supabaseKey = 'YOUR_PUBLIC_ANON_KEY'
    const supabase = supabase.createClient(supabaseUrl, supabaseKey)
  </script>

  <style>
    /* your existing CSS */
  </style>
</head>

// USERS
const users={
 mani:{pwd:"mani",role:"admin",dept:"IT"},
 manoj:{pwd:"manoj",role:"admin",dept:"Sales"},
 gothavari:{pwd:"gothavari",role:"admin",dept:"HR"},
 naga:{pwd:"naga",role:"emp",dept:"IT"},
 sakthi:{pwd:"sakthi",role:"emp",dept:"Sales"},
 preethi:{pwd:"preethi",role:"emp",dept:"Sales"},
 navya:{pwd:"navya",role:"emp",dept:"Accounts"}
};

let currentUser={};

// LOGIN
function login(){
 let u=username.value.trim().toLowerCase();
 let p=password.value.trim();
 if(users[u] && users[u].pwd===p){
   currentUser={name:u,...users[u]};
   msg.innerHTML="";
   openDashboard();
 }else msg.innerHTML="Invalid Login";
}

function openDashboard(){
 loginPage.style.display="none";
 dashboard.style.display="flex";
 uName.innerHTML=currentUser.name;
 uDept.innerHTML=currentUser.dept;
 uRole.innerHTML=currentUser.role==="admin"?"Admin":"Employee";
 initDept();
 listenRealtime();
}

// INIT DEPT
function initDept(){
 const ref=db.ref("departments/"+currentUser.dept);
 ref.get().then(s=>{
   if(!s.exists()){
     ref.set({budget:500000,history:[]});
   }
 });
}

// REALTIME LISTENER
function listenRealtime(){
 const ref=db.ref("departments/"+currentUser.dept);
 ref.on("value",snap=>{
   const d=snap.val();
   if(!d) return;

   let used=d.history.filter(h=>h.status==="approved")
     .reduce((s,h)=>s+h.amount,0);
   balance.value=d.budget-used;

   approvalBox.style.display=
     currentUser.role==="admin"?"block":"none";

   loadHistory(d.history);
   if(currentUser.role==="admin") loadApprovals(d.history);
 });
}

// SEND REQUEST
function sendRequest(){
 if(!item.value || amount.value<=0) return;
 const ref=db.ref("departments/"+currentUser.dept+"/history");
 ref.push({
   user:currentUser.name,
   dept:currentUser.dept, // added dept for filtering
   item:item.value,
   amount:+amount.value,
   status:"pending"
 });
 item.value=""; amount.value="";
 info.innerHTML="Request sent";
}

// HISTORY
function loadHistory(h){
 historyTable.innerHTML="<tr><th>User</th><th>Item</th><th>Amt</th><th>Status</th></tr>";
 Object.values(h||{}).forEach(x=>{
   if(currentUser.role==="admin" || x.user===currentUser.name){
     historyTable.innerHTML+=`
     <tr>
      <td>${x.user}</td><td>${x.item}</td><td>${x.amount}</td>
      <td class="${x.status}">${x.status}</td>
     </tr>`;
   }
 });
}

// APPROVAL
function loadApprovals(h){
 if(currentUser.role!=="admin") return;
 approvalTable.innerHTML="<tr><th>User</th><th>Item</th><th>Amt</th><th colspan='2'>Action</th></tr>";
 Object.entries(h||{}).forEach(([k,x])=>{
   if(x.status==="pending"){
     approvalTable.innerHTML+=`
     <tr>
      <td>${x.user}</td><td>${x.item}</td><td>${x.amount}</td>
      <td><button class="btn-green" onclick="updateStatus('${k}','approved')">Approve</button></td>
      <td><button class="btn-red" onclick="updateStatus('${k}','cancelled')">Cancel</button></td>
     </tr>`;
   }
 });
}

function updateStatus(key,status){
 db.ref(`departments/${currentUser.dept}/history/${key}/status`).set(status);
}

function logout(){location.reload()}
</script>
</body>
</html>











